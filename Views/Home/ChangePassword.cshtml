@using Helper
@{
    ViewBag.Title = "ChangePassword";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="col-md-12 col-sm-12 col-xs-12">
    <div class="x_panel">
        <div class="x_title">
            <h2>@Resources.getDescriptionBykey("Change Password")</h2>
            <ul class="nav navbar-right panel_toolbox">
                <li>
                    <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                </li>


            </ul>
            <div class="clearfix"></div>
        </div>
        <div class="x_content">

            <div class="clearfix"></div>





            <div>

                <input type="password" id="txtcurrpwd" class="form-control" placeholder="Current Password" />
                <br />
            </div>
            <div>

                <input type="password" id="txtpassword" class="form-control" placeholder="New Password" />
                <br />
            </div>
            <div>

                <input type="password" id="txtconfpassword" class="form-control" placeholder="Confirm Password" />
                <br />
            </div>

            <div>

                <a id="btnchangepwd" class="btn btn-info btn-lg submit">@Resources.getDescriptionBykey("Change Password")</a>

            </div>
            <div class="clearfix"></div>


            <div class="clearfix"></div>






        </div>
    </div>
</div>
<script>
                $(document).ready(function () {

                    $("#btnchangepwd").on('click', function (e) {
                        debugger;
                    var data = new FormData();
                    if ($('#txtpassword').val() != "" && $('#txtconfpassword').val() != ""
                        && $('#txtcurrpwd').val() != ""
                        && $('#txtpassword').val().length > 5
                        && $('#txtconfpassword').val().length > 5
                        && $('#txtcurrpwd').val().length > 5)
                    {
                        if ($('#txtpassword').val() == $('#txtconfpassword').val()) {
                            data.append("currpassword", $('#txtcurrpwd').val());
                            data.append("newpassword", $('#txtconfpassword').val());
                            $.ajax({
                                url: "@Url.Action("Updatepassword", "Account")",
                                type: 'GET',
                                data: { currpassword: $('#txtcurrpwd').val(), newpassword: $('#txtconfpassword').val() },
                                contentType: "application/json; charset=utf-8",


                                error: function (data1) {
                                    alert(data1);
                                },
                                success: function (data1) {

                                    alert(data1);
                                    var url = "/Account/Login" ;
                                    window.location.href = url;
                                }

                            });
                        }
                        else
                            alert("Enter the password ,and confirmation password");
                    }
                    else
                        alert("Entered new password and confirmation password to be same and length is to be alteast 6 chars");
                });

                });




</script>
